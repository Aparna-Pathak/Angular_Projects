<div class="container_one">
  <mat-card class="tasks_scheduler">
    <mat-card-header class="header">
      <img
        src="../assets/task.png"
        alt="Task Icon"
        class="header-icon"
        priority
      />
      <div class="header-text">
        <mat-card-title class="title">Task Scheduler</mat-card-title>
        <mat-card-subtitle class="subtitle">
          Let's get started for the day
        </mat-card-subtitle>
      </div>
    </mat-card-header>
    <hr />
    <mat-card-content class="contents_scheduler">
      <div class="row">
        <mat-form-field class="description-field" appearance="fill">
          <mat-label>What would you like to plan today ...</mat-label>
          <input
            matInput
            [(ngModel)]="newTaskTitle"
            placeholder="Enter task description"
          />
        </mat-form-field>
        <mat-form-field class="example-full-width">
          <mat-label>Choose a date</mat-label>
          <input matInput [matDatepicker]="picker" [(ngModel)]="newTaskDate" />
          <mat-hint>MM/DD/YYYY</mat-hint>
          <mat-datepicker-toggle matIconSuffix [for]="picker">
            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
          </mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      </div>
    </mat-card-content>
    <mat-card-actions class="actions">
      <div class="button-row">
        <button mat-raised-button color="primary" (click)="addTask()">
          Let's add it to the agenda!
        </button>
      </div>
    </mat-card-actions>
  </mat-card>

  <mat-card class="tasks">
    <mat-card-header>
      <mat-card-title class="title">Agenda for the Week -</mat-card-title>
    </mat-card-header>
    <mat-card-content class="contents_tasks">
      <mat-list>
        <mat-divider></mat-divider>
        <ng-container *ngFor="let task of Tasks; index as i">
          <mat-list-item class="task-item">
            <ng-container *ngIf="task.isEditing; else displayTask">
              <input
                type="text"
                [(ngModel)]="task.title"
                (keyup.enter)="saveTask(i)"
                (blur)="cancelEdit(i)"
                class="edit-input"
                placeholder="Edit task title"
              />
              <button mat-icon-button (click)="saveTask(i)" class="save-button">
                <mat-icon color="primary">check</mat-icon>
              </button>
            </ng-container>
            <ng-template #displayTask>
              <span class="task-text">
                {{ task.title }} - {{ task.date | date : "dd.MM.yyyy" }}
              </span>
              <button mat-icon-button (click)="editTask(i)" class="edit-button">
                <mat-icon color="primary">edit</mat-icon>
              </button>
              <button
                mat-icon-button
                (click)="deleteTask(i)"
                class="delete-button"
              >
                <mat-icon color="warn">delete</mat-icon>
              </button>
            </ng-template>
          </mat-list-item>
          <mat-divider *ngIf="i < Tasks.length - 1"></mat-divider>
        </ng-container>
      </mat-list>
    </mat-card-content>
  </mat-card>
</div>
